<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winter Outfit Wizard - 겨울 코디 추천</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- html2canvas & jsPDF for download feature -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen">
    
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50 border-b border-gray-100">
        <div class="container mx-auto px-4 py-5">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-1">
                        ❄️ Winter Outfit Wizard
                    </h1>
                    <p class="text-gray-500 text-sm ml-1">AI 기반 대학생 겨울 코디 추천 서비스</p>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="showInfoModal()" class="group relative px-5 py-2.5 rounded-xl font-semibold text-sm transition-all duration-300 border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white hover:shadow-lg hover:scale-105 flex items-center gap-2">
                        <span class="text-lg group-hover:rotate-12 transition-transform duration-300">ℹ️</span>
                        <span>사용방법</span>
                    </button>
                    <img src="/static/images/hanyang_logo.png" alt="Hanyang Intercollege" class="h-16 w-auto">
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        
        <!-- Form Section -->
        <form id="outfitForm" class="space-y-8">
        
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center mr-3">1</span>
                기본 정보
            </h2>
            
            <div class="space-y-6">
                
                <!-- 성별 -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">성별</label>
                    <div class="flex gap-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="gender" value="남성" required 
                                   class="w-4 h-4 text-blue-600 focus:ring-blue-500">
                            <span class="text-gray-700">남성</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="gender" value="여성" required 
                                   class="w-4 h-4 text-blue-600 focus:ring-blue-500">
                            <span class="text-gray-700">여성</span>
                        </label>
                    </div>
                </div>

                <!-- 나이 -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">연령대</label>
                    <select name="age_group" required 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                        <option value="">선택해주세요</option>
                        <option value="20대 초반 (20-23세)">20대 초반 (20-23세)</option>
                        <option value="20대 중반 (24-26세)">20대 중반 (24-26세)</option>
                        <option value="20대 후반 (27-29세)">20대 후반 (27-29세)</option>
                    </select>
                </div>

                <!-- 체형 -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">체형</label>
                    <select name="body_type" required 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                        <option value="">선택해주세요</option>
                        <option value="슬림">슬림</option>
                        <option value="보통">보통</option>
                        <option value="건장/근육질">건장/근육질</option>
                        <option value="통통">통통</option>
                    </select>
                </div>

                <!-- TPO -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">TPO (상황)</label>
                    <select name="tpo" required 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                        <option value="">선택해주세요</option>
                        <option value="캠퍼스 일상">캠퍼스 일상</option>
                        <option value="데이트">데이트</option>
                        <option value="면접">면접</option>
                        <option value="동아리/모임">동아리/모임</option>
                        <option value="여행">여행</option>
                        <option value="운동/액티비티">운동/액티비티</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Upload Section -->
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="bg-purple-100 text-purple-600 rounded-full w-8 h-8 flex items-center justify-center mr-3">2</span>
                가지고 있는 옷 업로드
            </h2>
            <p class="text-gray-600 mb-6">입고 싶은 옷만 업로드하세요. 나머지는 AI가 추천해드립니다!</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                
                <!-- Outer -->
                <div class="upload-box" data-category="outer">
                    <div class="dropzone border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-blue-500 transition-all duration-300 hover:shadow-lg bg-gradient-to-br from-blue-50 to-blue-100 cursor-pointer">
                        <div class="text-center">
                            <div class="text-4xl mb-2 transition-transform hover:scale-110">🧥</div>
                            <h3 class="font-semibold text-gray-800 mb-1">아우터</h3>
                            <p class="text-xs text-gray-500 mb-3">코트, 패딩, 자켓 등</p>
                            <input type="file" name="outer" accept="image/*" class="hidden">
                            <div class="preview-container" id="preview-outer"></div>
                            <div class="upload-text">
                                <span class="text-sm text-blue-600 font-medium">📷 클릭 또는 드래그</span>
                                <p class="text-xs text-gray-400 mt-1">JPG, PNG 지원</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Inner 1 -->
                <div class="upload-box" data-category="inner1">
                    <div class="dropzone border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-purple-500 transition-all duration-300 hover:shadow-lg bg-gradient-to-br from-purple-50 to-purple-100 cursor-pointer">
                        <div class="text-center">
                            <div class="text-4xl mb-2 transition-transform hover:scale-110">👕</div>
                            <h3 class="font-semibold text-gray-800 mb-1">이너1 (겉 상의)</h3>
                            <p class="text-xs text-gray-500 mb-3">후드티, 맨투맨, 니트 등</p>
                            <input type="file" name="inner1" accept="image/*" class="hidden">
                            <div class="preview-container" id="preview-inner1"></div>
                            <div class="upload-text">
                                <span class="text-sm text-purple-600 font-medium">📷 클릭 또는 드래그</span>
                                <p class="text-xs text-gray-400 mt-1">JPG, PNG 지원</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Inner 2 -->
                <div class="upload-box" data-category="inner2">
                    <div class="dropzone border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-indigo-500 transition-all duration-300 hover:shadow-lg bg-gradient-to-br from-indigo-50 to-indigo-100 cursor-pointer">
                        <div class="text-center">
                            <div class="text-4xl mb-2 transition-transform hover:scale-110">👔</div>
                            <h3 class="font-semibold text-gray-800 mb-1">이너2 (속 상의)</h3>
                            <p class="text-xs text-gray-500 mb-3">긴팔티, 목폴라 등</p>
                            <input type="file" name="inner2" accept="image/*" class="hidden">
                            <div class="preview-container" id="preview-inner2"></div>
                            <div class="upload-text">
                                <span class="text-sm text-indigo-600 font-medium">📷 클릭 또는 드래그</span>
                                <p class="text-xs text-gray-400 mt-1">JPG, PNG 지원</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom -->
                <div class="upload-box" data-category="bottom">
                    <div class="dropzone border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-pink-500 transition-all duration-300 hover:shadow-lg bg-gradient-to-br from-pink-50 to-pink-100 cursor-pointer">
                        <div class="text-center">
                            <div class="text-4xl mb-2 transition-transform hover:scale-110">👖</div>
                            <h3 class="font-semibold text-gray-800 mb-1">하의</h3>
                            <p class="text-xs text-gray-500 mb-3">바지, 치마 등</p>
                            <input type="file" name="bottom" accept="image/*" class="hidden">
                            <div class="preview-container" id="preview-bottom"></div>
                            <div class="upload-text">
                                <span class="text-sm text-pink-600 font-medium">📷 클릭 또는 드래그</span>
                                <p class="text-xs text-gray-400 mt-1">JPG, PNG 지원</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
            <button type="submit" 
                    class="group bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white px-16 py-5 rounded-full text-lg font-bold shadow-2xl hover:shadow-pink-500/50 transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 relative overflow-hidden">
                <span class="relative z-10 flex items-center justify-center gap-2">
                    <span class="text-2xl group-hover:animate-bounce">✨</span>
                    <span>AI 코디 추천 받기</span>
                    <span class="text-2xl group-hover:animate-bounce">✨</span>
                </span>
                <div class="absolute inset-0 bg-gradient-to-r from-pink-600 via-purple-600 to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </button>
        </div>
        
        </form>

        <!-- Loading -->
        <div id="loading" class="hidden">
            <div class="bg-white rounded-2xl shadow-2xl p-12 text-center border border-gray-100">
                <div class="relative inline-block mb-6">
                    <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600"></div>
                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl">🤖</div>
                </div>
                <p class="text-gray-700 font-semibold text-lg mb-2">AI가 최적의 코디를 분석하고 있습니다</p>
                <div class="flex justify-center gap-1 mt-4">
                    <div class="w-2 h-2 bg-blue-600 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                    <div class="w-2 h-2 bg-purple-600 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    <div class="w-2 h-2 bg-pink-600 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results" class="hidden">
            <div id="downloadableContent" class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <span class="bg-green-100 text-green-600 rounded-full w-8 h-8 flex items-center justify-center mr-3">✓</span>
                        추천 코디
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="downloadAsImage()" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-all flex items-center gap-2 shadow-md">
                            📸 이미지 저장
                        </button>
                        <button onclick="downloadAsPDF()" class="bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700 transition-all flex items-center gap-2 shadow-md">
                            📄 PDF 저장
                        </button>
                    </div>
                </div>
                <div id="recommendationContent"></div>
            </div>
        </div>

    </main>

    <!-- Info Modal -->
    <div id="infoModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-2xl">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">❄️ Winter Outfit Wizard 사용 가이드</h2>
                    <button onclick="closeInfoModal()" class="text-white hover:text-gray-200 text-3xl">&times;</button>
                </div>
            </div>
            
            <div class="p-8 space-y-8">
                <!-- 프로젝트 소개 -->
                <section>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-3xl mr-3">🎯</span>
                        프로젝트 소개
                    </h3>
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 space-y-3">
                        <p class="text-gray-700 leading-relaxed">
                            <strong>Winter Outfit Wizard</strong>는 AI 기술을 활용한 대학생 맞춤형 겨울 코디 추천 서비스입니다.
                        </p>
                        <p class="text-gray-700 leading-relaxed">
                            머신러닝 모델로 옷의 종류와 무늬를 자동 분류하고, 색상 추출 알고리즘으로 주요 색상을 분석합니다. 
                            Google Gemini AI가 개인 정보(성별, 연령, 체형, TPO)를 고려하여 최적의 코디 조합과 스타일링 팁을 제공합니다.
                        </p>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                            <div class="bg-white rounded-lg p-3 text-center">
                                <div class="text-2xl mb-1">🤖</div>
                                <div class="text-sm font-semibold text-gray-700">ML 분류</div>
                            </div>
                            <div class="bg-white rounded-lg p-3 text-center">
                                <div class="text-2xl mb-1">🎨</div>
                                <div class="text-sm font-semibold text-gray-700">색상 추출</div>
                            </div>
                            <div class="bg-white rounded-lg p-3 text-center">
                                <div class="text-2xl mb-1">✨</div>
                                <div class="text-sm font-semibold text-gray-700">AI 추천</div>
                            </div>
                            <div class="bg-white rounded-lg p-3 text-center">
                                <div class="text-2xl mb-1">📱</div>
                                <div class="text-sm font-semibold text-gray-700">반응형 UI</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 사용 방법 -->
                <section>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-3xl mr-3">📖</span>
                        사용 방법
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-white border-2 border-blue-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg flex-shrink-0">1</div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-800 mb-2">기본 정보 입력</h4>
                                    <p class="text-gray-600">성별, 연령대, 체형, TPO(상황)를 선택해주세요. 이 정보는 AI가 맞춤형 추천을 제공하는 데 사용됩니다.</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white border-2 border-purple-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg flex-shrink-0">2</div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-800 mb-2">옷 사진 업로드</h4>
                                    <p class="text-gray-600 mb-2">아우터, 이너1(겉옷), 이너2(속옷), 하의 사진을 업로드하세요. 드래그 앤 드롭 또는 클릭으로 업로드 가능합니다.</p>
                                    <ul class="list-disc list-inside text-sm text-gray-500 space-y-1">
                                        <li>JPG, PNG, WebP 형식 지원</li>
                                        <li>깨끗한 배경, 정면 촬영 권장</li>
                                        <li>조명이 밝은 곳에서 촬영</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white border-2 border-pink-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="bg-pink-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg flex-shrink-0">3</div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-800 mb-2">AI 코디 추천 받기</h4>
                                    <p class="text-gray-600">버튼을 클릭하면 AI가 분석을 시작합니다. ML 모델이 옷의 종류와 무늬를 분류하고, 색상을 추출한 후, Gemini AI가 최적의 조합을 추천합니다.</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white border-2 border-green-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="bg-green-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg flex-shrink-0">4</div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-800 mb-2">결과 확인 및 수정</h4>
                                    <p class="text-gray-600 mb-2">분석 결과에서 ML 분류가 잘못되었다면 "✏️ 수정" 버튼으로 직접 수정 가능합니다. 수정 후 하단의 "🔄 재추천 받기" 버튼을 눌러 새로운 추천을 받으세요.</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white border-2 border-orange-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="bg-orange-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-lg flex-shrink-0">5</div>
                                <div>
                                    <h4 class="font-bold text-lg text-gray-800 mb-2">결과 저장</h4>
                                    <p class="text-gray-600">추천 결과를 이미지(PNG) 또는 PDF로 다운로드하여 보관하거나 공유할 수 있습니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 주요 기능 -->
                <section>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-3xl mr-3">⚡</span>
                        주요 기능
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5">
                            <h4 class="font-bold text-gray-800 mb-2">🎯 ML 기반 자동 분류</h4>
                            <p class="text-sm text-gray-600">MobileNetV2 전이 학습 모델로 옷의 종류(9개 아우터, 9개 하의 등)와 무늬(6종)를 자동 분류합니다.</p>
                        </div>
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5">
                            <h4 class="font-bold text-gray-800 mb-2">🎨 스마트 색상 추출</h4>
                            <p class="text-sm text-gray-600">K-means 클러스터링으로 주요 색상 3가지를 자동 추출하고, 색상 이름과 비율을 분석합니다.</p>
                        </div>
                        <div class="bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-5">
                            <h4 class="font-bold text-gray-800 mb-2">✨ AI 맞춤 추천</h4>
                            <p class="text-sm text-gray-600">Google Gemini AI가 개인 정보를 고려하여 4가지 코디 조합과 상세한 스타일링 팁을 제공합니다.</p>
                        </div>
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5">
                            <h4 class="font-bold text-gray-800 mb-2">✏️ 실시간 수정 기능</h4>
                            <p class="text-sm text-gray-600">ML 분류 결과가 정확하지 않을 때 직접 수정 후 재추천을 받을 수 있습니다.</p>
                        </div>
                    </div>
                </section>

                <!-- 팁 -->
                <section>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-3xl mr-3">💡</span>
                        사용 팁
                    </h3>
                    <div class="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-6">
                        <ul class="space-y-3">
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-600 text-xl">✓</span>
                                <span class="text-gray-700"><strong>사진 촬영:</strong> 옷을 평평하게 펼쳐서 촬영하면 더 정확한 분석이 가능합니다.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-600 text-xl">✓</span>
                                <span class="text-gray-700"><strong>색상 정확도:</strong> 자연광이나 밝은 조명 아래에서 촬영하면 색상 추출이 더 정확합니다.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-600 text-xl">✓</span>
                                <span class="text-gray-700"><strong>ML 분류:</strong> 신뢰도(%)가 낮으면 잘못 분류되었을 가능성이 높으니 수정 기능을 활용하세요.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-yellow-600 text-xl">✓</span>
                                <span class="text-gray-700"><strong>다양한 조합:</strong> 여러 번 시도해보면 다양한 스타일 조합을 발견할 수 있습니다.</span>
                            </li>
                        </ul>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white mt-16 py-6 border-t">
        <div class="container mx-auto px-4 text-center text-gray-600">
            <p>© 2025 Winter Outfit Wizard - AI 기반 겨울 코디 추천 서비스</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="/static/js/main.js"></script>
</body>
</html>
